<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Hosting Documentation - Lapidary.jl</title>
      
      
      
      
        <meta name="author" content="Michael Hatherly">
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Lapidary.jl">
    <meta property="og:image" content="None/../../">
    <meta name="apple-mobile-web-app-title" content="Lapidary.jl">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-20d5debb47.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../assets/Lapidary.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-indigo palette-accent-blue">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Manual <i class="icon icon-link"></i>
              
            
          </span>
        
        Hosting Documentation
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/MichaelHatherly/Lapidary.jl" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>Lapidary.jl </strong>
        
          <br>
          MichaelHatherly/Lapidary.jl
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/MichaelHatherly/Lapidary.jl/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/MichaelHatherly/Lapidary.jl/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="../..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Manual</span>
    <ul>
      
        
  <li>
    <a class="" title="Guide" href="../guide/">
      Guide
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Syntax" href="../syntax/">
      Syntax
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Doctests" href="../doctests/">
      Doctests
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Hosting Documentation" href="./">
      Hosting Documentation
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Overview" href="#overview">
                Overview
              </a>
            </li>
          
            <li class="anchor">
              <a title="GitHub Security Key" href="#github-security-key">
                GitHub Security Key
              </a>
            </li>
          
            <li class="anchor">
              <a title="Travis Environment Settings" href="#travis-environment-settings">
                Travis Environment Settings
              </a>
            </li>
          
            <li class="anchor">
              <a title=".travis.yml Configuration" href="#travisyml-configuration">
                .travis.yml Configuration
              </a>
            </li>
          
            <li class="anchor">
              <a title="The deploydocs Function" href="#the-deploydocs-function">
                The deploydocs Function
              </a>
            </li>
          
            <li class="anchor">
              <a title="The MkDocs mkdocs.yml File" href="#the-mkdocs-mkdocsyml-file">
                The MkDocs mkdocs.yml File
              </a>
            </li>
          
            <li class="anchor">
              <a title=".gitignore" href="#gitignore">
                .gitignore
              </a>
            </li>
          
            <li class="anchor">
              <a title="gh-pages Branch" href="#gh-pages-branch">
                gh-pages Branch
              </a>
            </li>
          
            <li class="anchor">
              <a title="Documentation Versions" href="#documentation-versions">
                Documentation Versions
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Internals" href="../internals/">
      Internals
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Library</span>
    <ul>
      
        
  <li>
    <a class="" title="Public" href="../../lib/public/">
      Public
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Internals" href="../../lib/internals/">
      Internals
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <p><a id='hosting-documentation'></a></p>
<h1 id="hosting-documentation">Hosting Documentation</h1>
<p>After going through the <a href="../guide/#package-guide">Package Guide</a> and <a href="../doctests/#doctests">Doctests</a> page you will need to host the generated documentation somewhere for potential users to read. This guide will describe how to setup automatic updates for your package docs using the Travis build service and GitHub Pages. This is the same approach used by this package to host it's own docs â€“ the docs you're currently reading.</p>
<p><strong>Note</strong></p>
<p>This guide assumes that you already have GitHub and Travis accounts setup. If not then go set those up first and then return here.</p>
<p><a id='overview'></a></p>
<h2 id="overview">Overview</h2>
<p>Once setup correctly the following will happen each time you push new updates to your package repository:</p>
<ul>
<li>travis buildbots startup and run your tests;</li>
<li>each buildbot will build the package docs using your <code>docs/make.jl</code> script;</li>
<li>a single buildbot will then try to push the generated docs back the github.</li>
</ul>
<p>The following sections outline how to enable this for your own package.</p>
<p><a id='github-security-key'></a></p>
<h2 id="github-security-key">GitHub Security Key</h2>
<p>Firstly, generate a new <a href="https://github.com/settings/tokens">personal access token</a>.</p>
<p>Enter a description for this new token. We'll be calling ours "Travis", but any other name will do. For the "Select scopes" option choose "public_repo" <strong>only</strong>. Then generate the token and save it somewhere safe. We'll be needing it during the next section.</p>
<p><a id='travis-environment-settings'></a></p>
<h2 id="travis-environment-settings">Travis Environment Settings</h2>
<p>Next we'll add the generated token to our repository's Travis page. Go to the settings page for the repository and under the "Environment Variables" section add a new variable called <code>GITHUB_API_KEY</code>. Copy the generated key from the <a href="./#github-security-key">GitHub Security Key</a> section as the value and <strong>make sure</strong> that "Display value in build log" is <strong>off</strong>. Then add the key.</p>
<p><a id='travisyml-configuration'></a></p>
<h2 id="travisyml-configuration"><code>.travis.yml</code> Configuration</h2>
<p>To allow Travis to install the extra dependencies needed to build our docs add the following to your <code>.travis.yml</code> file in your package:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">before_script</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">export PATH=$HOME/.local/bin:$PATH</span>
</pre></div>


<p>In the <code>after_success</code> section of the <code>.travis.yml</code> file, where code coverage is processed, run your <code>docs/make.jl</code> file:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">after_success</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">julia -e &#39;Pkg.clone(&quot;https://github.com/MichaelHatherly/Lapidary.jl&quot;)&#39;</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">julia -e &#39;cd(Pkg.dir(&quot;PACKAGE_NAME&quot;)); include(joinpath(&quot;docs&quot;, &quot;make.jl&quot;))&#39;</span>
</pre></div>


<p>Note that once the package is registered in <code>METADATA.jl</code> the <code>Pkg.clone</code> call can be replaced with <code>Pkg.add("Lapidary")</code>.</p>
<p><a id='the-deploydocs-function'></a></p>
<h2 id="the-deploydocs-function">The <code>deploydocs</code> Function</h2>
<p>At the moment your <code>docs/make.jl</code> file probably only contains</p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="n">Lapidary</span><span class="p">,</span> <span class="n">PACKAGE_NAME</span>

<span class="n">makedocs</span><span class="p">()</span>
</pre></div>


<p>We'll need to add an additional call to this file after <a href="../../lib/public/#Lapidary.makedocs"><code>makedocs</code></a>. Add the following at the end of the file:</p>
<div class="codehilite"><pre><span></span><span class="n">deploydocs</span><span class="p">(</span>
    <span class="n">repo</span> <span class="o">=</span> <span class="s">&quot;github.com/USER_NAME/PACKAGE_NAME.jl.git&quot;</span>
<span class="p">)</span>
</pre></div>


<p>where <code>USER_NAME</code> and <code>PACKAGE_NAME</code> must be set to the appropriate names.</p>
<p>By default <code>deploydocs</code> will deploy the documentation from the <code>nightly</code> Julia build for Linux. This can be changed using the <code>julia</code> and <code>osname</code> keywords as follows:</p>
<div class="codehilite"><pre><span></span><span class="n">deploydocs</span><span class="p">(</span>
    <span class="n">repo</span>   <span class="o">=</span> <span class="s">&quot;github.com/USER_NAME/PACKAGE_NAME.jl.git&quot;</span><span class="p">,</span>
    <span class="n">julia</span>  <span class="o">=</span> <span class="s">&quot;0.4&quot;</span><span class="p">,</span>
    <span class="n">osname</span> <span class="o">=</span> <span class="s">&quot;osx&quot;</span>
<span class="p">)</span>
</pre></div>


<p>This will deploy the docs from the OSX Julia 0.4 Travis build bot.</p>
<p>See the <a href="../../lib/public/#Lapidary.deploydocs"><code>deploydocs</code></a> function documentation for more details.</p>
<p><a id='the-mkdocs-mkdocsyml-file'></a></p>
<h2 id="the-mkdocs-mkdocsyml-file">The MkDocs <code>mkdocs.yml</code> File</h2>
<p>We'll be using <a href="http://www.mkdocs.org">MkDocs</a> to convert the markdown files generated by Lapidary to HTML. (This, of course, is not the only option you have for this step. Any markdown to HTML converter should work fine with some amount of setting up.)</p>
<p>Add an <code>mkdocs.yml</code> file to your <code>docs/</code> directory with the following content:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">site_name</span><span class="p p-Indicator">:</span>        <span class="l l-Scalar l-Scalar-Plain">PACKAGE_NAME.jl</span>
<span class="l l-Scalar l-Scalar-Plain">repo_url</span><span class="p p-Indicator">:</span>         <span class="l l-Scalar l-Scalar-Plain">https://github.com/USER_NAME/PACKAGE_NAME.jl</span>
<span class="l l-Scalar l-Scalar-Plain">site_description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Description...</span>
<span class="l l-Scalar l-Scalar-Plain">site_author</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">USER_NAME</span>

<span class="l l-Scalar l-Scalar-Plain">theme</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">readthedocs</span>

<span class="l l-Scalar l-Scalar-Plain">extra_css</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assets/Lapidary.css</span>

<span class="l l-Scalar l-Scalar-Plain">extra_javascript</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">assets/mathjaxhelper.js</span>

<span class="l l-Scalar l-Scalar-Plain">markdown_extensions</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">extra</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tables</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">fenced_code</span>

<span class="l l-Scalar l-Scalar-Plain">docs_dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;build&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">pages</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Home</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">index.md</span>
</pre></div>


<p>This is only a basic skeleton. Read through the MkDocs documentation if you would like to know more about the available settings.</p>
<p><a id='gitignore'></a></p>
<h2 id="gitignore"><code>.gitignore</code></h2>
<p>Add the following to your package's <code>.gitignore</code> file</p>
<div class="codehilite"><pre><span></span>docs/build/
docs/site/
</pre></div>


<p>These are needed to avoid committing generated content to your repository.</p>
<p><a id='gh-pages-branch'></a></p>
<h2 id="gh-pages-branch"><code>gh-pages</code> Branch</h2>
<p>Create a new branch called <code>gh-pages</code> and push it to GitHub. If this branch already exists then you can skip this step, but do note that the generated content is automatically pushed to this branch from Travis.</p>
<p><a id='documentation-versions'></a></p>
<h2 id="documentation-versions">Documentation Versions</h2>
<p>When documentation is generated it is stored in one of the following folders:</p>
<ul>
<li>
<p><code>latest</code> stores the most recent documentation that is committed to the <code>master</code> branch.</p>
</li>
<li>
<p><code>stable</code> stores the most recent documentation from a tagged commit. Older tagged versions   are stored in directories named after their tags. These tagged directories are persistent   and must be manually removed from the <code>gh-pages</code> branch if necessary.</p>
</li>
</ul>
<hr />
<p><strong>Final Remarks</strong></p>
<p>That should be all that is needed to enable automatic documentation building. Pushing new commits to your <code>master</code> branch should trigger doc builds. Note that other branches do not trigger these builds and neither do pull requests by potential contributors.</p>
<p>If you would like to see a more complete example of how this process is setup then take a look at this package's repository for some inspiration.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../doctests/" title="Doctests">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Doctests
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../internals/" title="Internals">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Internals
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'MichaelHatherly/Lapidary.jl';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    
      <script src="../../assets/mathjaxhelper.js"></script>
    
    
  </body>
</html>